name: Deploy API to Railway   # Nom du workflow visible sur GitHub Actions UI

# 1 - Quand le pipeline doit se lancer ?
on:
  push:               # D√©clencheur : √† chaque "push"
    branches:
      - main          # Seulement quand tu pushes sur la branche "main"

# 2 - Le job qu‚Äôon ex√©cute
jobs:
  deploy:
    runs-on: ubuntu-latest                              # Machine virtuelle Ubuntu (gratuite, fournie par GitHub)

    steps:
      - uses: actions/checkout@v3                       # 1√®re √©tape : r√©cup√©rer ton code depuis le repo GitHub

      - name: Railway Up                                # 2√®me √©tape : appel de Railway
        uses: railwayapp/cli-action@v1                  # Action officielle Railway CLI
        with:
          command: up                                   # Commande = Railway "up" (build + d√©ploiement)
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}   # üîê Token d'authentification s√©curis√©
